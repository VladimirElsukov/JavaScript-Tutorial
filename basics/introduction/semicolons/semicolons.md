# Завершающие точки с запятыми в JavaScript

Завершающие точки с запятыми (`;`) в JavaScript представляют собой обязательные знаки препинания, завершающие каждое выражение. Хотя JavaScript позволяет опускать точки с запятыми в большинстве случаев, рекомендуется их ставить по нескольким причинам.

## Нужны ли точки с запятыми?

Несмотря на то, что JavaScript поддерживает автоматическое завершение инструкций (Automatic Semicolon Insertion, ASI), иногда отсутствие точек с запятых может приводить к неожиданным ошибкам и путанице. Поэтому лучше выработать привычку завершать каждую инструкцию точкой с запятой.

## Автоматическое вставка точки с запятой (ASI)

В JavaScript предусмотрены ситуации, когда точки с запятыми автоматически ставятся там, где они отсутствуют. Интерпретатор пытается самостоятельно завершить инструкцию, исходя из общего контекста.

Некоторые случаи, когда ASI срабатывает:

- Перед началом новой инструкции, если предыдущая не завершилась точкой с запятой.
- Перед открывающей круглой скобкой `(`, квадратной скобкой `[` или объектом `{`.
- Перед оператором возврата (`return`), бросания исключений (`throw`), перехода (`break`, `continue`) и начала цикла (`for`, `while`).

Тем не менее, ASI может вызвать проблемы в особых случаях, таких как:

```javascript
var foo = bar +
  baz;

(function () {})()
```

Если бы здесь отсутствовала точка с запятой после первой строки, интерпретатор попытался бы объединить обе строки, считая вторую частью первой инструкции, что привело бы к ошибке.

## Когда обязательно ставить точку с запятой?

Хотя формально точки с запятой не требуются, есть ситуации, когда их отсутствие приведет к проблемам:

1. **Многостроковые выражения**:

   Без точки с запятой следующая инструкция может стать продолжением предыдущей:

   ```javascript
   var a = 1
   (function () {})
   ```

   В таком случае интерпретатор попытается выполнить первую строку как аргумент функции второй строки, вызвав ошибку.

2. **Перед ключевыми словами**:

   Отсутствие точки с запятой перед такими операторами, как `return`, `break`, `continue`, может изменить поведение программы:

   ```javascript
   function test() {
     return
     true
   }
   ```

   В результате функция вернёт `undefined`, потому что возврат осуществляется немедленно, а `true` считается отдельной инструкцией.

3. **Перед значениями**:

   Иногда необходимость поставить точку с запятой возникает, если следующая строка начинается с литерального объекта или массива:

   ```javascript
   var obj =
     {}
   ```

   Здесь отсутствует точка с запятой после объявления переменной, что заставляет интерпретатор считать следующее слово открытием нового объекта.

## Польза использования точек с запятой

1. **Предсказуемость**: Явное использование точек с запятой предотвращает ошибки интерпретации.
2. **Удобство отладки**: Большинство IDE и редактора указывают на нехватку точки с запятой как ошибку.
3. **Минимизация потенциальных конфликтов**: Многие минификаторы требуют наличия точек с запятой для оптимизации.

## Примеры правильного использования

```javascript
// Пример 1: использование точки с запятой
let x = 10;
let y = 20;

// Пример 2: автоматическое завершение
let z = 30
x + y + z

// Пример 3: проблема без точки с запятой
let fn = function () {} // Нет точки с запятой
({foo: 'bar'}) // Будет ошибка
```

## Заключение

Несмотря на автоматическое дополнение точек с запятой, рекомендуется ставить их явно. Это предотвратит ошибки и повысит предсказуемость поведения программы. В современном стиле разработки принято ставить точки с запятой после каждой инструкции.